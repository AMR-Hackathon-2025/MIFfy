---
title: "MIFfy summary"
params:
  result_dir: ""
  result_file: ""
---
```{r echo=FALSE, message=FALSE}
library(knitr)
library(tidyverse)
```
```{r echo=FALSE, message=FALSE}
contig.results <- read_tsv(params$result_file)
# we're assuming one integron per read
distinct.clusters <- nrow(distinct(contig.results, ReadID)) # TODO name will likely change
```
MIFfy found `r distinct.clusters` unique integron(s) in the sample.

## Unique integrons
```{r echo=FALSE, message=FALSE}
contig.results %>% distinct(ReadID, .keep_all=TRUE) %>%
 mutate(integron_plot = str_c('![](', file.path(params$result_dir, "images", str_c(ReadID, ".png")), ')')) %>%
  select(ReadID, integron_plot, AMR) %>%
        knitr::kable()
```
## Unique cassettes

```{r echo=FALSE, message=FALSE}
contig.results %>% add_count(Cassete_ID, name="times_seen") %>%
  distinct(Cassete_ID, .keep_all=TRUE) %>%
  select(Cassete_ID, times_seen, AMR) %>%
        knitr::kable()
```